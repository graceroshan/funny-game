<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flappy Bird ‚Äî Easy Restart Version</title>
  <style>
    :root{--bg:#88d0ff;--ground:#6aa84f}
    *{box-sizing:border-box;font-family:Arial, Helvetica, sans-serif}
    html,body{height:100%;margin:0}
    .game-wrap{
      position:relative;
      height:100vh;
      overflow:hidden;
      background:linear-gradient(#cfefff,#88d0ff);
      display:flex;
      align-items:flex-start;
      justify-content:center;
    }
    .ground{
      position:absolute;
      left:0;right:0;bottom:0;
      height:80px;
      background:linear-gradient(#5aa34a,#3f7e2a);
      z-index:5;
    }

    .bird{
      position:absolute;
      left:30vw;
      top:40vh;
      width:50px;
      height:55px;
      background:url("subham2.jpg") center/cover no-repeat;
      z-index:10;
      transform-origin:center;
      transition:transform 0.06s linear;
    }

    .pipe{
      position:absolute;
      left:110vw;
      width:80px;
      background:url("mia.jpg") center/cover no-repeat;
      z-index:6;
    }

    .score{
      position:fixed;
      top:14px;
      left:14px;
      font-size:36px;
      color:white;
      text-shadow:0 2px 0 rgba(0,0,0,0.7);
      z-index:20;
    }

    .center-msg{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      z-index:30;
      background:rgba(255,255,255,0.9);
      padding:18px 28px;
      border-radius:10px;
      text-align:center;
    }

    #gameOverBox{
      display:none;
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      background:rgba(0,0,0,0.85);
      padding:20px;
      border-radius:12px;
      text-align:center;
      z-index:50;
      color:white;
      box-shadow:0 0 20px rgba(0,0,0,0.6);
    }

    #gameOverImage{
      width:150px;
      margin:10px auto;
      display:block;
      border-radius:10px;
    }

    #restartBtn{
      margin-top:10px;
      padding:10px 20px;
      font-size:16px;
      background:#28a745;
      border:none;
      border-radius:8px;
      color:white;
      cursor:pointer;
      transition:0.2s;
    }
    #restartBtn:hover{ background:#23923d; }

  </style>
</head>
<body>
  <div class="game-wrap" id="game">
    <div class="score" id="score">0</div>

    <div class="center-msg" id="overlay">
      <strong id="title">Press Enter to Start</strong>
      <p>Use <strong>Space</strong> or <strong>‚Üë</strong> to flap.</p>
    </div>

    <div class="bird" id="bird"></div>
    <div class="ground" id="ground"></div>
  </div>

  <audio id="bgMusic" src="gm audio.mp3" loop></audio>

  <!-- üí• Game Over Box -->
  <div id="gameOverBox">
    <h2>Game Over!</h2>
    <div id="scoreText" style="margin-top:10px; font-size:18px;">
      Score: <span id="currentScore">0</span><br>
      üèÜ High Score: <span id="bestScore">0</span>
    </div>
    <img id="gameOverImage" src="gameover.jpg">
    <button id="restartBtn">Restart</button>
  </div>

  <audio id="gameOverSound" src="gameover.mp3"></audio>

  <script>
    const game = document.getElementById('game');
    const birdEl = document.getElementById('bird');
    const scoreEl = document.getElementById('score');
    const overlay = document.getElementById('overlay');
    const groundEl = document.getElementById('ground');
    const restartBtn = document.getElementById('restartBtn');

    // üü¢ Easier Game Settings
    const GRAVITY = 0.0012;
    const FLAP_V = -0.38;
    const PIPE_SPEED = 0.18;
    const PIPE_INTERVAL = 1600;
    const GAP = 220;
    const PIPE_WIDTH = 80;

    let bird = { x: window.innerWidth * 0.3, y: window.innerHeight * 0.4, vy: 0 };
    let pipes = [];
    let lastTime = null;
    let spawnTimer = 0;
    let running = false;
    let gameOverFlag = false;
    let score = 0;

    function updateBirdDOM(){
      birdEl.style.left = bird.x + 'px';
      birdEl.style.top = bird.y + 'px';
      birdEl.style.transform = `rotate(${Math.max(-25, Math.min(70, bird.vy * 120))}deg)`;
    }

    function rect(el){return el.getBoundingClientRect();}
    function intersects(a,b){
      return !(a.right < b.left || a.left > b.right || a.bottom < b.top || a.top > b.bottom);
    }

    function spawnPipe(){
      const minTop = 60;
      const maxTop = window.innerHeight - GAP - groundEl.offsetHeight - 60;
      const topHeight = Math.floor(Math.random() * (maxTop - minTop + 1)) + minTop;

      const top = document.createElement('div');
      top.className = 'pipe top';
      top.style.height = topHeight + 'px';
      top.style.left = window.innerWidth + 'px';
      top.style.top = '0px';
      top.style.width = PIPE_WIDTH + 'px';

      const bottom = document.createElement('div');
      bottom.className = 'pipe bottom';
      bottom.style.height = (window.innerHeight - groundEl.offsetHeight - GAP - topHeight) + 'px';
      bottom.style.left = window.innerWidth + 'px';
      bottom.style.top = (topHeight + GAP) + 'px';
      bottom.style.width = PIPE_WIDTH + 'px';

      game.appendChild(top);
      game.appendChild(bottom);
      pipes.push({top, bottom, x: window.innerWidth, passed: false});
    }

    function loop(timestamp){
      if (!lastTime) lastTime = timestamp;
      const dt = timestamp - lastTime;
      lastTime = timestamp;

      if (running){
        bird.vy += GRAVITY * dt;
        bird.y += bird.vy * dt;

        spawnTimer += dt;
        if (spawnTimer >= PIPE_INTERVAL){ spawnTimer = 0; spawnPipe(); }

        for (let i = pipes.length -1; i >=0; i--){
          const p = pipes[i];
          p.x -= PIPE_SPEED * dt;
          p.top.style.left = p.x + 'px';
          p.bottom.style.left = p.x + 'px';
          if (!p.passed && (p.x + PIPE_WIDTH) < bird.x){ p.passed = true; score++; scoreEl.textContent = score; }
          if (p.x + PIPE_WIDTH < -50){ p.top.remove(); p.bottom.remove(); pipes.splice(i,1); }
        }

        if (bird.y + birdEl.offsetHeight > window.innerHeight - groundEl.offsetHeight){ gameOver(); }
        if (bird.y < 0){ bird.y = 0; bird.vy = 0; }

        const birdRect = rect(birdEl);
        for (const p of pipes){
          const topRect = rect(p.top);
          const bottomRect = rect(p.bottom);
          if (intersects(birdRect, topRect) || intersects(birdRect, bottomRect)){ gameOver(); break; }
        }
        updateBirdDOM();
      }
      requestAnimationFrame(loop);
    }

    function startGame(){
      document.getElementById("gameOverBox").style.display = "none";
      overlay.style.display = "none";
      gameOverFlag = false;
      const music = document.getElementById("bgMusic");
      if (music.paused) music.play();
      pipes.forEach(p=>{p.top.remove();p.bottom.remove();});
      pipes = [];
      bird = { x: window.innerWidth * 0.3, y: window.innerHeight * 0.4, vy: 0 };
      score = 0;
      scoreEl.textContent = score;
      lastTime = null;
      spawnTimer = 0;
      running = true;
      updateBirdDOM();
    }

    function gameOver(){
      running = false;
      gameOverFlag = true;
      document.getElementById("bgMusic").pause();

      let highScore = localStorage.getItem('flappyHighScore') || 0;
      if (score > highScore){ highScore = score; localStorage.setItem('flappyHighScore', highScore); }
      document.getElementById("currentScore").textContent = score;
      document.getElementById("bestScore").textContent = highScore;

      document.getElementById("gameOverBox").style.display = "block";
      const snd = document.getElementById("gameOverSound");
      snd.currentTime = 0;
      snd.play();
    }

    function flap(){
      if (!running || gameOverFlag) return;
      bird.vy = FLAP_V;
      birdEl.style.transform = 'rotate(-20deg)';
      setTimeout(()=>updateBirdDOM(),80);
    }

    // Start game with Enter
    window.addEventListener('keydown', e=>{
      if (e.code === 'Enter' && !running && !gameOverFlag){
        startGame();
      }
      if ((e.code === 'Space' || e.code === 'ArrowUp') && running){
        e.preventDefault();
        flap();
      }
    });

    game.addEventListener('pointerdown', ()=>{
      if (running && !gameOverFlag) flap();
    });

    // Restart only when button clicked
    restartBtn.addEventListener('click', ()=>{
      startGame();
    });

    updateBirdDOM();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
